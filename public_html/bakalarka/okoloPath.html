<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="../js/0.4.1/snap.svg.js"></script>

    <link rel="stylesheet" type="text/css" href="../css/style.css">

    <title></title>
</head>
<body>
<svg id="my-canvas" class="canvas" width="600" height="300"></svg>

<script type="text/javascript">
    var paper = Snap('my-canvas', 600, 300);

    var path = paper.path([
            "M100, 100 C, 100, 0, 400, 200, 400, 100 S, 100, 200, 100, 100 z "]
    ).attr({strokeWidth: 2});
    var circle = paper.circle(0, 0, 13).attr({fill: '#09c', cursor: 'pointer'});

    var pathLength = path.getTotalLength();
    paper.customAttributes.pathFactor = function(distance) {
        var point = path.getPointAtLength(distance * pathLength);
        var dx = point.x,
            dy = point.y;
        return {
            transform: ['T', dx, dy]
        };
    };

    circle.attr({pathFactor: 0});

    function runloop() {
        circle.animate({pathFactor: 1}, 4000, function() {
            this.attr({pathFactor: 0}); // Reset
            setTimeout(runloop);
        });
        circle.unclick().click(function() {
            this.pause();
        });
        circle.undblclick().dblclick(function() {
            this.resume();
        });
    };
    runloop();
</script>
</body>
</html>